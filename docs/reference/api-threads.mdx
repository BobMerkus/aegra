---
title: "Threads API"
description: "API reference for managing conversation threads and state."
---

Threads represent conversations. Each thread has its own state, message history, and checkpoints. Runs execute within threads, and state is automatically persisted after each node execution.

## Create thread

<ParamField path="POST" type="/threads">
  Create a new conversation thread.
</ParamField>

### Request body

| Field | Type | Required | Default | Description |
|-------|------|----------|---------|-------------|
| `thread_id` | `string` | No | Auto-generated | Client-supplied ID for idempotent creation |
| `metadata` | `object` | No | `null` | Initial metadata |
| `initial_state` | `object` | No | `null` | Initial state values |
| `if_exists` | `string` | No | `"raise"` | Behavior on duplicate ID: `"raise"` or `"do_nothing"` |

### Response

Returns the created `Thread` object.

```python
from langgraph_sdk import get_client

client = get_client(url="http://localhost:8000")

# Simple creation
thread = await client.threads.create()

# With metadata
thread = await client.threads.create(
    metadata={"user_name": "Alice", "session": "onboarding"},
)

# Idempotent creation with specific ID
thread = await client.threads.create(
    thread_id="my-thread-123",
    if_exists="do_nothing",
)
```

---

## List threads

<ParamField path="GET" type="/threads">
  List all threads belonging to the authenticated user.
</ParamField>

### Response

| Field | Type | Description |
|-------|------|-------------|
| `threads` | `list[Thread]` | List of thread objects |
| `total` | `integer` | Total count |

```python
result = await client.threads.list()
for thread in result["threads"]:
    print(f"{thread['thread_id']}: {thread['status']}")
```

---

## Search threads

<ParamField path="POST" type="/threads/search">
  Search threads by status, metadata, or other filters.
</ParamField>

### Request body

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `metadata` | `object` | `null` | Metadata key-value filters |
| `status` | `string` | `null` | Filter by status: `idle`, `busy`, `interrupted`, `error` |
| `limit` | `integer` | `20` | Max results (1–100) |
| `offset` | `integer` | `0` | Pagination offset |
| `order_by` | `string` | `"created_at DESC"` | Sort order |

### Response

Returns `list[Thread]`.

```python
# Search by metadata
threads = await client.threads.search(
    metadata={"user_name": "Alice"},
)

# Search by status
threads = await client.threads.search(status="interrupted")

# With pagination
threads = await client.threads.search(limit=20, offset=0)
```

---

## Get thread

<ParamField path="GET" type="/threads/{thread_id}">
  Fetch a single thread by ID.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Response

Returns a `Thread` object.

```python
thread = await client.threads.get("my-thread-id")
print(thread["status"])  # "idle", "busy", "interrupted", "error"
```

---

## Update thread

<ParamField path="PATCH" type="/threads/{thread_id}">
  Update a thread's metadata.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Request body

| Field | Type | Description |
|-------|------|-------------|
| `metadata` | `object` | Updated metadata (merged with existing) |

### Response

Returns the updated `Thread` object.

```python
await client.threads.update(
    "my-thread-id",
    metadata={"priority": "high"},
)
```

---

## Delete thread

<ParamField path="DELETE" type="/threads/{thread_id}">
  Delete a thread. Automatically cancels any active runs first.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Response

Returns `{"status": "deleted"}`.

```python
await client.threads.delete("my-thread-id")
```

---

## Get thread state

<ParamField path="GET" type="/threads/{thread_id}/state">
  Get the current state of a thread, including values, next nodes, tasks, and interrupts.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Query parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `subgraphs` | `boolean` | `false` | Include subgraph states |
| `checkpoint_ns` | `string` | `null` | Scope to a checkpoint namespace |

### Response

Returns a `ThreadState` object.

```python
state = await client.threads.get_state("my-thread-id")

print(state["values"])       # Current state values
print(state["next"])         # Next nodes to execute
print(state["tasks"])        # Pending tasks
print(state["interrupts"])   # Active interrupts
print(state["checkpoint_id"])
```

---

## Update thread state

<ParamField path="POST" type="/threads/{thread_id}/state">
  Update thread state directly, or retrieve it when `values` is omitted.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Request body

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `values` | `object \| list[object]` | `null` | State values to write. Omit to read instead. |
| `checkpoint` | `object` | `null` | Target checkpoint |
| `checkpoint_id` | `string` | `null` | Target checkpoint ID |
| `as_node` | `string` | `null` | Apply update as if this node just executed |
| `subgraphs` | `boolean` | `false` | Include subgraph states (read mode) |
| `checkpoint_ns` | `string` | `null` | Checkpoint namespace |

### Response

When updating: returns `{"checkpoint": {...}}` with the new checkpoint info.

When reading (no `values`): returns a `ThreadState` object.

```python
# Inject a message into the thread
await client.threads.update_state(
    "my-thread-id",
    values={"messages": [{"type": "human", "content": "Injected message"}]},
    as_node="agent",
)
```

---

## Get state at checkpoint

<ParamField path="GET" type="/threads/{thread_id}/state/{checkpoint_id}">
  Get thread state at a specific historical checkpoint.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |
| `checkpoint_id` | `string` | The checkpoint ID |

### Query parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `subgraphs` | `boolean` | `false` | Include subgraph states |
| `checkpoint_ns` | `string` | `null` | Checkpoint namespace |

### Response

Returns a `ThreadState` object at the specified checkpoint.

```python
state = await client.threads.get_state(
    "my-thread-id",
    checkpoint_id="checkpoint-abc",
)
```

---

## Get checkpoint history

<ParamField path="GET" type="/threads/{thread_id}/history">
  Browse the checkpoint history for a thread.
</ParamField>

### Path parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `thread_id` | `string` | The thread ID |

### Query parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `limit` | `integer` | `10` | Max results (1–1000) |
| `before` | `string` | `null` | Return states before this checkpoint ID |
| `subgraphs` | `boolean` | `false` | Include subgraph states |
| `checkpoint_ns` | `string` | `null` | Checkpoint namespace |
| `metadata` | `string` | `null` | JSON-encoded metadata filter |

### Response

Returns `list[ThreadState]`.

```python
history = await client.threads.get_history("my-thread-id")

for entry in history:
    print(f"Checkpoint: {entry['checkpoint_id']}")
    print(f"  Values: {entry['values']}")
    print(f"  Next: {entry['next']}")
```

---

## Thread object

The `Thread` object returned by all thread endpoints:

| Field | Type | Description |
|-------|------|-------------|
| `thread_id` | `string` | Unique identifier |
| `status` | `string` | `idle`, `busy`, `interrupted`, or `error` |
| `metadata` | `object` | Thread metadata |
| `user_id` | `string` | Owner identity |
| `created_at` | `datetime` | Creation timestamp |
| `updated_at` | `datetime` | Last update timestamp |

## ThreadState object

The `ThreadState` object returned by state and history endpoints:

| Field | Type | Description |
|-------|------|-------------|
| `values` | `object` | Current state values (messages, etc.) |
| `next` | `list[string]` | Next nodes to be executed |
| `tasks` | `list[object]` | Pending tasks |
| `interrupts` | `list[object]` | Active interrupt data |
| `metadata` | `object` | Checkpoint metadata |
| `created_at` | `datetime` | State creation time |
| `checkpoint` | `object` | Current checkpoint info |
| `parent_checkpoint` | `object \| null` | Parent checkpoint info |
| `checkpoint_id` | `string` | Checkpoint ID |
| `parent_checkpoint_id` | `string \| null` | Parent checkpoint ID |
